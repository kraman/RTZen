<project name="RTZen ORB Hello Demo" default="compile">

    <property name="package.dir" value="demo/hello"/>
    <property name="idl.src" value="hello.idl"/>

	<import file="../../../init.xml"/>
	<import file="../demo_tasks.xml"/>

    <target name="compile">
		<idlc file="${zen.srcdir}/${package.dir}/${idl.src}"/>
		<demo.compile/>
        <jar
            jarfile="${zen.libdir}/hello_world.jar"
            basedir="${zen.classdir}"
            includes="${package.dir}/**"/>
        <antcall target="compile.jrate"/>
    </target>

    <target name="compile.jrate" if="compiler_jRate">
        <demo.compile.jrate main="demo.hello.Client" out="client">
            <fileset dir="${zen.srcdir}/${package.dir}">
                <include name="Client.java"/>
                <exclude name="Server.java"/>
            </fileset>
            <fileset dir="${zen.gendir}/${package.dir}">
                <include name="*.java"/>
            </fileset>
         </demo.compile.jrate>
    </target>

    <target name="server">
        <demo.run classname="demo.hello.Server"/>
    </target>

    <target name="client">
        <demo.run classname="demo.hello.Client"/>
    </target>

    <target name="clean">
		<demo.clean/>
    </target>

</project>
